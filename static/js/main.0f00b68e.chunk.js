(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(43),a=n.n(i),o=(n(49),n(2)),s=n(44),u=n.n(s),l=n(22),d=n(13),j=(n(79),n(0));var b=function(e){return Object(j.jsxs)("div",{id:"title",style:{fontSize:"".concat(e.size),textAlign:"".concat(e.align)},children:[Object(j.jsx)("span",{"data-content":"s",className:"title-span",style:{color:"red"},children:"s"}),Object(j.jsx)("span",{"data-content":"k",className:"title-span",style:{color:"orangered"},children:"k"}),Object(j.jsx)("span",{"data-content":"r",className:"title-span",style:{color:"yellow"},children:"r"}),Object(j.jsx)("span",{"data-content":"i",className:"title-span",style:{color:"green"},children:"i"}),Object(j.jsx)("span",{"data-content":"b",className:"title-span",style:{color:"skyblue"},children:"b"}),Object(j.jsx)("span",{"data-content":"b",className:"title-span",style:{color:"blue"},children:"b"}),Object(j.jsx)("span",{"data-content":"l",className:"title-span",style:{color:"purple"},children:"l"})]})},f=Object(c.createContext)(),h=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(f.Provider,{value:[r,i],children:e.children})},O=Object(c.createContext)(),x=function(e){var t=Object(c.useState)({id:"",username:""}),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(O.Provider,{value:[r,i],children:e.children})};var v=function(e){var t=e.setGame,n=e.socketRef,r=(e.wait,e.setWait,Object(c.useContext)(O)),i=Object(o.a)(r,2),a=i[0],s=i[1],u=Object(c.useContext)(f),h=Object(o.a)(u,2),x=(h[0],h[1]),v=Object(c.useState)(""),m=Object(o.a)(v,2),w=m[0],p=m[1],g=function(e){""!==a.username?n.current.emit("join",a,(function(e){e.error?p(e.error):(p(""),t(!0),x(e.allUsers),new Audio("/skribbl/sounds/join.ogg").play())})):p("Fill up the details!")};return Object(j.jsxs)("div",{className:"outer-container",children:[Object(j.jsx)(b,{size:"15vw",stroke:"0.4vw",align:"center"}),Object(j.jsx)("div",{className:"form-container",children:Object(j.jsxs)("div",{id:"login-form",children:[Object(j.jsx)("input",{id:"username",autoComplete:"off",className:"mt-10",type:"text",placeholder:"Username",name:"username",onChange:function(e){var t=e.target,n=t.name,c=t.value;s((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},n,c))}))},onKeyPress:function(e){return"Enter"===e.code?g():null},value:a.username}),Object(j.jsx)("button",{id:"play",className:"mt-10",onClick:g,children:"Join"}),w?Object(j.jsx)("p",{id:"error",children:w}):null]})})]})},m=n(9),w=(n(81),n(82),n(83),n(12)),p=n(10);var g=function(e){var t=e.user,n=e.details,c=e.drawerId;return Object(j.jsxs)("div",{className:"card-container",children:[Object(j.jsx)("h3",{id:"user-name",children:t.username+(n.username===t.username?" (You)":"")}),t.id===c?Object(j.jsx)(w.a,{icon:p.c}):null,Object(j.jsx)("h3",{id:"user-score",children:t.score})]})};var y=function(e){var t=e.users,n=e.user,c=e.drawerId;return Object(j.jsx)("div",{className:"scores-container",children:t.map((function(e,t){return Object(j.jsx)(g,{index:t,user:e,details:n,drawerId:c},t)}))})},C=Object(c.createContext)(),N=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(C.Provider,{value:[r,i],children:e.children})};n(88);var k=function(e){var t=e.socketRef,n=Object(c.useState)(""),r=Object(o.a)(n,2),i=r[0],a=r[1],s=Object(c.useContext)(C),u=Object(o.a)(s,2),l=u[0],d=(u[1],Object(c.useRef)(null));Object(c.useEffect)((function(){d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[l]);var b=function(e){return Object(j.jsxs)("span",{style:{fontWeight:"800"},children:[" ",e," : "]})};return Object(j.jsxs)("div",{className:"guess-container",children:[Object(j.jsx)("div",{ref:d,className:"guess-list",children:l.map((function(e,t){var n=t%2===0?"#E8E8E8":"#C8C8C8";return Object(j.jsxs)("p",{style:{color:"".concat(e.color),backgroundColor:n,margin:"0",padding:"10px",overflowWrap:"break-word",transition:"0.5s ease"},children:[" ",e.sender?b(e.sender):null," ",Object(j.jsx)("span",{children:e.message})," "]},t)}))}),Object(j.jsx)("div",{className:"input-container",children:Object(j.jsx)("input",{className:"guess-input",type:"text",placeholder:"Type your guess ...",onChange:function(e){a(e.target.value.toLowerCase())},onKeyPress:function(e){13===e.which&&i.length>0&&i.trim().length>0&&(t.current.emit("guess",i.trim()),a(""))},value:i})})]})};n(89);var S=function(e){var t=e.users,n=e.scoredUsers,c=e.word;return Object(j.jsxs)("div",{className:"score-board",children:[Object(j.jsxs)("h3",{className:"scores",children:[" The word was : ",c," "]}),t.map((function(e,t){return function(e,t){var c=n.findIndex((function(t){return t===e.id}));return Object(j.jsxs)("div",{className:"score-card",children:[Object(j.jsxs)("h5",{children:[" ",e.username," "]}),Object(j.jsxs)("h5",{style:{color:"green"},children:[" ",-1===c?0:100," "]})]},t)}(e,t)}))]})};n(90);var F=function(e){var t=e.socketRef,n=e.drawerId,r=e.drawing,i=e.setDrawing,a=e.canvasParent,o=e.drawBackground,s=e.drawLine,u=e.clearCanvas,l=e.eraseCanvas,d=e.setCanvas,b=e.editOption,f=e.color,h=Object(c.useRef)(null),O=Object(c.useRef)(b),x=Object(c.useRef)(f),v=void 0;Object(c.useEffect)((function(){var e=h.current,n=e.getContext("2d");if(d(e),a.current){var c=a.current.clientWidth,r=a.current.clientHeight,j=c<r?c:r;e.width=j,e.height=j}o(n,e),t.current.on("draw",(function(t){var c=t.color,r=t.mousedown,i=t.mousemove;s(n,e,c,r,i)})),t.current.on("erase",(function(t){var c=t.mousedown,r=t.mousemove;l(n,e,"white",c,r)})),t.current.on("clear",(function(){u(n,e),i([])})),t.current.on("drawData",(function(e){var t={initial:{x:e.x1,y:e.y1},final:{x:e.x2,y:e.y2},color:e.color};i((function(e){return[].concat(Object(m.a)(e),[t])}))}))}),[t]),Object(c.useEffect)((function(){t.current.id===n&&(p(h.current,h.current.getContext("2d")),h.current.style.touchAction="none")}),[t,n]),Object(c.useEffect)((function(){x.current=f,O.current=b}),[f,b]),Object(c.useEffect)((function(){var e=h.current,t=e.getContext("2d");w(t,e),window.addEventListener("resize",(function(t){if(a.current){var n=a.current.clientWidth,c=a.current.clientHeight,r=n<c?n:c;e.width=r,e.height=r}o(e.getContext("2d"),e),w(e.getContext("2d"),e)}))}),[r]);var w=function(e,t){u(e,t),r.forEach((function(n){var c={x:n.initial.x*t.width,y:n.initial.y*t.height},r={x:n.final.x*t.width,y:n.final.y*t.height};r.x&&r.y?s(e,t,n.color,c,r):s(e,t,n.color,c)}))},p=function(e,t){e.addEventListener("pointerdown",(function(e){return y(e,t)})),e.addEventListener("pointermove",(function(e){return g(e,t)})),e.addEventListener("pointerup",(function(e){return C(e,t)})),e.addEventListener("pointerleave",(function(e){return C(e,t)})),e.addEventListener("pointercancel",(function(e){return C(e,t)}))},g=function(e,n){if(v){var c={x:e.offsetX,y:e.offsetY},r=h.current;if("edit"===O.current){var a={initial:{x:v.x/r.width,y:v.y/r.height},final:{x:c.x/r.width,y:c.y/r.height},color:x.current};i((function(e){return[].concat(Object(m.a)(e),[a])})),t.current.emit("drawData",{x1:a.initial.x,y1:a.initial.y,x2:a.final.x,y2:a.final.y,color:x.current})}else{var o={initial:{x:v.x/r.width,y:v.y/r.height},final:{x:c.x/r.width,y:c.y/r.height},color:"white"};i((function(e){return[].concat(Object(m.a)(e),[o])})),t.current.emit("drawData",{x1:o.initial.x,y1:o.initial.y,x2:o.final.x,y2:o.final.y,color:"white"})}v=c}},y=function(e,n){v={x:e.offsetX,y:e.offsetY};var c=h.current;if("edit"===O.current){var r={initial:{x:v.x/c.width,y:v.y/c.height},final:{},color:x.current};i((function(e){return[].concat(Object(m.a)(e),[r])})),t.current.emit("drawData",{x1:r.initial.x,y1:r.initial.y,color:x.current})}else{var a={initial:{x:v.x/c.width,y:v.y/c.height},final:{},color:"white"};i((function(e){return[].concat(Object(m.a)(e),[a])})),t.current.emit("drawData",{x1:a.initial.x,y1:a.initial.y,color:"white"})}},C=function(e,t){v=void 0};return Object(j.jsx)("canvas",{ref:h,id:"canvas",style:{cursor:"url(./Cursor/edit5.svg) 5 5, crosshair"}})},E=(n(91),["#000000","#FFFFFF","#C0C0C0","#808080","#FFA500","#A52A2A","#800000","#008000","#808000","#FF0000","#00FFFF","#0000FF","#0000A0","#ADD8E6","#800080","#FFFF00","#00FF00","#FF00FF"]);var R=function(e){var t=e.color,n=e.options,c=e.editOption,r=e.handleColorChange;return Object(j.jsxs)("div",{className:"options-outer-container",children:[Object(j.jsx)("div",{className:"options-container",children:E.map((function(e,n){return function(e,n){var c="color-box";return e===t&&(c+=" color-box-active"),Object(j.jsx)("button",{onClick:function(){return r(e)},className:c,style:{backgroundColor:"".concat(e)}},n)}(e,n)}))}),Object(j.jsx)("div",{className:"options-container",children:n.map((function(e,t){return function(e,t){var n="option-icon";return e.name===c&&(n+=" option-icon-active"),Object(j.jsx)(w.a,{className:n,icon:e.icon,onClick:e.handler},t)}(e,t)}))})]})},W=function(e,t){e&&(e.fillStyle="white",e.fillRect(0,0,t.width,t.height))},A=function(e,t,n,c,r){e&&(r?(e.beginPath(),e.lineWidth=6,e.lineCap="round",e.lineJoin="round",e.strokeStyle=n,e.moveTo(c.x,c.y),e.lineTo(r.x,r.y),e.stroke(),e.closePath()):(e.fillStyle=n,e.fillRect(c.x-4,c.y-4,6,6)))},P=function(e,t){e&&(e.clearRect(0,0,t.width,t.height),W(e,t),window.sessionStorage.removeItem("drawing"))},D=function(e,t,n,c,r){e&&(r?(e.beginPath(),e.strokeStyle="white",e.lineWidth=10,e.lineCap="round",e.lineJoin="round",e.moveTo(c.x,c.y),e.lineTo(r.x,r.y),e.stroke(),e.closePath()):(e.fillStyle="white",e.fillRect(c.x-5,c.y-5,10,10)),window.sessionStorage.setItem("drawing",t.toDataURL("image/svg")))};var I=function(e){var t=e.socketRef,n=e.wait,r=e.setWait,i=Object(c.useContext)(f),a=Object(o.a)(i,2),s=a[0],u=a[1],l=Object(c.useContext)(O),h=Object(o.a)(l,2),x=h[0],v=(h[1],Object(c.useState)([])),g=Object(o.a)(v,2),N=g[0],I=g[1],L=Object(c.useState)([]),T=Object(o.a)(L,2),U=T[0],z=T[1],J=Object(c.useState)("canvas"),_=Object(o.a)(J,2),B=_[0],G=_[1],H=Object(c.useState)(""),Y=Object(o.a)(H,2),K=Y[0],X=Y[1],M=Object(c.useState)([]),q=Object(o.a)(M,2),Q=q[0],V=q[1],Z=Object(c.useState)([]),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)("_"),ce=Object(o.a)(ne,2),re=ce[0],ie=ce[1],ae=Object(c.useState)("-"),oe=Object(o.a)(ae,2),se=oe[0],ue=oe[1],le=Object(c.useState)(0),de=Object(o.a)(le,2),je=de[0],be=de[1],fe=Object(c.useState)(0),he=Object(o.a)(fe,2),Oe=he[0],xe=he[1],ve=Object(c.useState)("edit"),me=Object(o.a)(ve,2),we=me[0],pe=me[1],ge=Object(c.useState)(null),ye=Object(o.a)(ge,2),Ce=ye[0],Ne=ye[1],ke=Object(c.useState)(E[0]),Se=Object(o.a)(ke,2),Fe=Se[0],Ee=Se[1],Re=Object(c.useRef)(null),We=Object(c.useContext)(C),Ae=Object(o.a)(We,2),Pe=(Ae[0],Ae[1]);Object(c.useEffect)((function(){t.current.emit("joined",x.username),t.current.on("addUser",(function(e){De("join"),u((function(t){return[].concat(Object(m.a)(t),[e])}))})),t.current.on("wait",(function(e){r(e)})),t.current.on("updateScore",(function(e){De("playerGuessed"),u((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))})),t.current.on("guess",(function(e){Pe((function(t){return[].concat(Object(m.a)(t),[e])}))})),t.current.on("chooseWord",(function(e){te(e),G("words"),I([])})),t.current.on("drawing",(function(e){var t=e.drawing;V(t)})),t.current.on("timer",(function(e){De("tick"),ue(e)})),t.current.on("end",(function(e){G("end"),z(e),V([]),ue("-")})),t.current.on("total-rounds",(function(e){xe(e)})),t.current.on("rounds",(function(e){be(e)})),t.current.on("endgame",(function(e){De("roundEndSuccess"),I(e.sort((function(e,t){return e.score>=t.score?-1:1}))),G("endgame")})),t.current.on("reset",(function(){u((function(e){return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{score:0})}))})),ue("-"),Pe([])})),t.current.on("drawer",(function(e){var t=e.id,n=e.newWord;X(t),ie(n),z([]),G("canvas")})),t.current.on("removeUser",(function(e){De("leave"),u((function(t){return t.filter((function(t){return t.id!==e.id}))}))}))}),[]);var De=function(e){new Audio("/skribbl/sounds/"+e+".ogg").play()},Ie=function(e){Ee(e)},Le=[{name:"edit",icon:p.c,handler:function(){pe("edit")}},{name:"erase",icon:p.b,handler:function(){pe("erase")}},{name:"clear",icon:p.d,handler:function(e){t.current.id===K&&(P(Ce.getContext("2d"),Ce),V([]),t.current.emit("clear"))}}],Te=function(){return Object(j.jsxs)("div",{className:"canvas-options-outer-container",children:[Object(j.jsx)("h3",{children:"Choose a word !"}),Object(j.jsx)("div",{className:"word-options-container",children:ee.map((function(e,n){return Object(j.jsxs)("button",{className:"word-option",onClick:function(){return function(e){t.current.emit("chooseWord",e),De("roundStart"),te([])}(e)},children:[" ",e," "]},n)}))})]})},Ue=function(){return Object(j.jsx)("div",{className:"canvas-options-outer-container",children:N.map((function(e,t){return function(e,t){return Object(j.jsxs)("div",{className:"card-flexed",children:[Object(j.jsxs)("h3",{children:[" # ",t+1," "]}),Object(j.jsxs)("h3",{children:[" ",e.username," "]}),Object(j.jsxs)("h3",{children:[" ",e.score," "]})]},t)}(e,t)}))})};return n?Object(j.jsx)("div",{className:"outer-container center-wait",children:Object(j.jsx)("h1",{className:"wait",children:"Waiting for users to join"})}):Object(j.jsxs)("div",{className:"outer-container",children:[Object(j.jsx)("nav",{children:Object(j.jsx)(b,{size:"3rem",stroke:"2px",align:"left"})}),Object(j.jsxs)("div",{className:"word-bar",children:[Object(j.jsxs)("div",{className:"rounds-info-container",children:[Object(j.jsxs)("h1",{className:"timer",children:[" ",Object(j.jsx)(w.a,{icon:p.a})," ",se," s "]}),Object(j.jsxs)("h1",{className:"rounds",children:[" ",je," / ",Oe," "]})]}),Object(j.jsxs)("h1",{className:"word",children:[" ",t.current.id===K?re:function(){for(var e=re.length,t="",n=0;n<e;n++)"-"===re[n]||" "===re[n]?t+=re[n]:t+="_";return"_"===t||""===t?"_":t}()," "]})]}),Object(j.jsxs)("div",{className:"canvas-outer-container",children:[Object(j.jsx)(y,{users:s,user:x,drawerId:K}),Object(j.jsx)("div",{ref:Re,className:"canvas-container",children:function(){switch(B){case"words":return Te();case"canvas":return Object(j.jsx)(F,{canvasParent:Re,socketRef:t,drawing:Q,setDrawing:V,drawerId:K,drawBackground:W,drawLine:A,clearCanvas:P,eraseCanvas:D,setCanvas:Ne,editOption:we,color:Fe,time:se});case"end":return Object(j.jsx)(S,{users:s,scoredUsers:U,word:re});case"endgame":return Ue()}}()}),Object(j.jsx)(k,{socketRef:t})]}),Object(j.jsx)(R,{options:Le,color:Fe,editOption:we,handleColorChange:Ie})]})};var L=function(){var e="https://skribbl-cloned.herokuapp.com/",t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(!0),s=Object(o.a)(a,2),l=s[0],d=s[1],b=Object(c.useRef)(null);return Object(c.useEffect)((function(){b.current=u()(e,{transports:["websocket"]})}),[e]),Object(j.jsx)(N,{children:Object(j.jsx)("div",{children:r?Object(j.jsx)(I,{socketRef:b,setWait:d,wait:l}):Object(j.jsx)(v,{socketRef:b,wait:l,setGame:i,setWait:d})})})};var T=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(h,{children:Object(j.jsx)(x,{children:Object(j.jsx)(L,{})})})})};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.0f00b68e.chunk.js.map